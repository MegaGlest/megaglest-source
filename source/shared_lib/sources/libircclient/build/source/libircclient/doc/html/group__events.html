<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>libircclient: Handling IRC events.</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Handling IRC events.</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structirc__callbacks__t.html">irc_callbacks_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Event callbacks structure.  <a href="structirc__callbacks__t.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__events.html#gc472d3e37df8f172fed3d75e649fac14">irc_event_callback_t</a> )(<a class="el" href="libircclient_8h.html#0030a976ab3e6a247d57e30fd5979cd5">irc_session_t</a> *session, const char *event, const char *origin, const char **params, unsigned int count)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A most common event callback.  <a href="#gc472d3e37df8f172fed3d75e649fac14"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__events.html#gb6000d309e87cfb727dcad0136fcb79f">irc_eventcode_callback_t</a> )(<a class="el" href="libircclient_8h.html#0030a976ab3e6a247d57e30fd5979cd5">irc_session_t</a> *session, unsigned int event, const char *origin, const char **params, unsigned int count)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A numeric event callback.  <a href="#gb6000d309e87cfb727dcad0136fcb79f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__events.html#g8c3ddaa55e5ded002b5054f0b926381c">irc_event_dcc_chat_t</a> )(<a class="el" href="libircclient_8h.html#0030a976ab3e6a247d57e30fd5979cd5">irc_session_t</a> *session, const char *nick, const char *addr, <a class="el" href="libircclient_8h.html#4136d52803e88f369d728e1e3b0e70f7">irc_dcc_t</a> dccid)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A remote DCC CHAT request callback.  <a href="#g8c3ddaa55e5ded002b5054f0b926381c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__events.html#g5f4b1d95f2d6619041f993ba748544cf">irc_event_dcc_send_t</a> )(<a class="el" href="libircclient_8h.html#0030a976ab3e6a247d57e30fd5979cd5">irc_session_t</a> *session, const char *nick, const char *addr, const char *filename, unsigned long size, <a class="el" href="libircclient_8h.html#4136d52803e88f369d728e1e3b0e70f7">irc_dcc_t</a> dccid)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A remote DCC CHAT request callback.  <a href="#g5f4b1d95f2d6619041f993ba748544cf"></a><br></td></tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="gc472d3e37df8f172fed3d75e649fac14"></a><!-- doxytag: member="libirc_events.h::irc_event_callback_t" ref="gc472d3e37df8f172fed3d75e649fac14" args=")(irc_session_t *session, const char *event, const char *origin, const char **params, unsigned int count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="group__events.html#gc472d3e37df8f172fed3d75e649fac14">irc_event_callback_t</a>)(<a class="el" href="libircclient_8h.html#0030a976ab3e6a247d57e30fd5979cd5">irc_session_t</a> *session, const char *event, const char *origin, const char **params, unsigned int count)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A most common event callback. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>session</em>&nbsp;</td><td>the session, which generates an event </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>the text name of the event. Useful in case you use a single event handler for several events simultaneously. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>origin</em>&nbsp;</td><td>the originator of the event. See the note below. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>params</em>&nbsp;</td><td>a list of event params. Depending on the event nature, it could have zero or more params. The actual number of params is specified in count. None of the params can be NULL, but 'params' pointer itself could be NULL for some events. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>count</em>&nbsp;</td><td>the total number of params supplied.</td></tr>
  </table>
</dl>
Every event generates a callback. This callback is generated by most events. Depending on the event nature, it can provide zero or more params. For each event, the number of provided params is fixed, and their meaning is described.<p>
Every event has origin, though the <em>origin</em> variable may be NULL, which means that event origin is unknown. The origin usually looks like nick!host@ircserver, i.e. like tim!home@irc.krasnogorsk.ru. Such origins can not be used in IRC commands, and need to be stripped (i.e. host and server part should be cut off) before using. This can be done either explicitly, by calling <a class="el" href="group__nnparse.html#g217df7c7c7dc5e60678dd14e24e41f03" title="Gets the nick part from the target.">irc_target_get_nick()</a>, or implicitly for all the events - by setting the <a class="el" href="group__options.html#g0dd67b0a5373a108d86d911fa5741e72" title="allows to strip origins automatically.">LIBIRC_OPTION_STRIPNICKS</a> option with <a class="el" href="group__options.html#gc5d81f651f1441690f3f59c3ddccaa48" title="Sets the libircclient option.">irc_option_set()</a>. 
</div>
</div><p>
<a class="anchor" name="g8c3ddaa55e5ded002b5054f0b926381c"></a><!-- doxytag: member="libirc_events.h::irc_event_dcc_chat_t" ref="g8c3ddaa55e5ded002b5054f0b926381c" args=")(irc_session_t *session, const char *nick, const char *addr, irc_dcc_t dccid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="group__events.html#g8c3ddaa55e5ded002b5054f0b926381c">irc_event_dcc_chat_t</a>)(<a class="el" href="libircclient_8h.html#0030a976ab3e6a247d57e30fd5979cd5">irc_session_t</a> *session, const char *nick, const char *addr, <a class="el" href="libircclient_8h.html#4136d52803e88f369d728e1e3b0e70f7">irc_dcc_t</a> dccid)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A remote DCC CHAT request callback. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>session</em>&nbsp;</td><td>the session, which generates an event </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nick</em>&nbsp;</td><td>the person who requested DCC CHAT with you. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>the person's IP address in decimal-dot notation. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dccid</em>&nbsp;</td><td>an id associated with this request. Use it in calls to <a class="el" href="group__dccstuff.html#g43f747d3b2252109f9d811ea8414745b" title="Accepts a remote DCC CHAT or DCC RECVFILE request.">irc_dcc_accept()</a> or <a class="el" href="group__dccstuff.html#g3ff4ca78d346b7acf847cf28a7211bf4" title="Declines a remote DCC CHAT or DCC RECVFILE request.">irc_dcc_decline()</a>.</td></tr>
  </table>
</dl>
This callback is called when someone requests DCC CHAT with you. In respond you should call either <a class="el" href="group__dccstuff.html#g43f747d3b2252109f9d811ea8414745b" title="Accepts a remote DCC CHAT or DCC RECVFILE request.">irc_dcc_accept()</a> to accept chat request, or <a class="el" href="group__dccstuff.html#g3ff4ca78d346b7acf847cf28a7211bf4" title="Declines a remote DCC CHAT or DCC RECVFILE request.">irc_dcc_decline()</a> to decline chat request.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="group__dccstuff.html#g43f747d3b2252109f9d811ea8414745b" title="Accepts a remote DCC CHAT or DCC RECVFILE request.">irc_dcc_accept</a> or <a class="el" href="group__dccstuff.html#g3ff4ca78d346b7acf847cf28a7211bf4" title="Declines a remote DCC CHAT or DCC RECVFILE request.">irc_dcc_decline</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="g5f4b1d95f2d6619041f993ba748544cf"></a><!-- doxytag: member="libirc_events.h::irc_event_dcc_send_t" ref="g5f4b1d95f2d6619041f993ba748544cf" args=")(irc_session_t *session, const char *nick, const char *addr, const char *filename, unsigned long size, irc_dcc_t dccid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="group__events.html#g5f4b1d95f2d6619041f993ba748544cf">irc_event_dcc_send_t</a>)(<a class="el" href="libircclient_8h.html#0030a976ab3e6a247d57e30fd5979cd5">irc_session_t</a> *session, const char *nick, const char *addr, const char *filename, unsigned long size, <a class="el" href="libircclient_8h.html#4136d52803e88f369d728e1e3b0e70f7">irc_dcc_t</a> dccid)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A remote DCC CHAT request callback. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>session</em>&nbsp;</td><td>the session, which generates an event </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nick</em>&nbsp;</td><td>the person who requested DCC CHAT with you. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>the person's IP address in decimal-dot notation. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>the sent filename. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>the filename size. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dccid</em>&nbsp;</td><td>an id associated with this request. Use it in calls to <a class="el" href="group__dccstuff.html#g43f747d3b2252109f9d811ea8414745b" title="Accepts a remote DCC CHAT or DCC RECVFILE request.">irc_dcc_accept()</a> or <a class="el" href="group__dccstuff.html#g3ff4ca78d346b7acf847cf28a7211bf4" title="Declines a remote DCC CHAT or DCC RECVFILE request.">irc_dcc_decline()</a>.</td></tr>
  </table>
</dl>
This callback is called when someone wants to send a file to you using DCC SEND. As with chat, in respond you should call either <a class="el" href="group__dccstuff.html#g43f747d3b2252109f9d811ea8414745b" title="Accepts a remote DCC CHAT or DCC RECVFILE request.">irc_dcc_accept()</a> to accept this request and receive the file, or <a class="el" href="group__dccstuff.html#g3ff4ca78d346b7acf847cf28a7211bf4" title="Declines a remote DCC CHAT or DCC RECVFILE request.">irc_dcc_decline()</a> to decline this request.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="group__dccstuff.html#g43f747d3b2252109f9d811ea8414745b" title="Accepts a remote DCC CHAT or DCC RECVFILE request.">irc_dcc_accept</a> or <a class="el" href="group__dccstuff.html#g3ff4ca78d346b7acf847cf28a7211bf4" title="Declines a remote DCC CHAT or DCC RECVFILE request.">irc_dcc_decline</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="gb6000d309e87cfb727dcad0136fcb79f"></a><!-- doxytag: member="libirc_events.h::irc_eventcode_callback_t" ref="gb6000d309e87cfb727dcad0136fcb79f" args=")(irc_session_t *session, unsigned int event, const char *origin, const char **params, unsigned int count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="group__events.html#gb6000d309e87cfb727dcad0136fcb79f">irc_eventcode_callback_t</a>)(<a class="el" href="libircclient_8h.html#0030a976ab3e6a247d57e30fd5979cd5">irc_session_t</a> *session, unsigned int event, const char *origin, const char **params, unsigned int count)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A numeric event callback. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>session</em>&nbsp;</td><td>the session, which generates an event </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>the numeric code of the event. Useful in case you use a single event handler for several events simultaneously. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>origin</em>&nbsp;</td><td>the originator of the event. See the note below. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>params</em>&nbsp;</td><td>a list of event params. Depending on the event nature, it could have zero or more params. The actual number of params is specified in count. None of the params can be NULL, but 'params' pointer itself could be NULL for some events. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>count</em>&nbsp;</td><td>the total number of params supplied.</td></tr>
  </table>
</dl>
Most times in reply to your actions the IRC server generates numeric callbacks. Most of them are error codes, and some of them mark list start and list stop markers. Every code has its own set of params; for details you can either experiment, or read RFC 1459.<p>
Every event has origin, though the <em>origin</em> variable may be NULL, which means that event origin is unknown. The origin usually looks like nick!host@ircserver, i.e. like tim!home@irc.krasnogorsk.ru. Such origins can not be used in IRC commands, and need to be stripped (i.e. host and server part should be cut off) before using. This can be done either explicitly, by calling <a class="el" href="group__nnparse.html#g217df7c7c7dc5e60678dd14e24e41f03" title="Gets the nick part from the target.">irc_target_get_nick()</a>, or implicitly for all the events - by setting the <a class="el" href="group__options.html#g0dd67b0a5373a108d86d911fa5741e72" title="allows to strip origins automatically.">LIBIRC_OPTION_STRIPNICKS</a> option with <a class="el" href="group__options.html#gc5d81f651f1441690f3f59c3ddccaa48" title="Sets the libircclient option.">irc_option_set()</a>. 
</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sat Jan 10 18:19:35 2009 for libircclient by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.7.1 </small></address>
</body>
</html>

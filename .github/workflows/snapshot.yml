name: Make Snapshot
concurrency:
  group: build-${{ github.ref }}
  cancel-in-progress: true
on:
  push:
    branches: [ develop ]

# The artifact only runs on the same distro that it was built on.
jobs:
  make-snapshot:
    strategy:
      fail-fast: false
    runs-on: ubuntu-latest
    container: jammyjamjamman/megaglest-build-env:bionic
    steps:
    - uses: actions/checkout@v3
    - name: Build
      run:  |
        mk/linux/build-appimage.sh
    - name: Create MegaGlest Snapshot
      uses: actions/upload-artifact@v2
      with:
        name: megaglest-x64-ubuntu
        path: |
          mk/linux/MegaGlest*.AppImage
